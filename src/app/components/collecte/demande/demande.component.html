<app-navbar></app-navbar>

<!-- Conteneur principal avec fond vert -->
<div class="min-h-screen bg-green-600 flex items-center justify-center p-6">

  <!-- Carte contenant le formulaire -->
  <div class="w-full max-w-2xl bg-white shadow-xl rounded-2xl p-8">
    <h2 class="text-3xl font-bold text-center text-gray-800 mb-6">üóëÔ∏è Faire une Demande de Collecte</h2>

    <form [formGroup]="demandeForm" (ngSubmit)="ajouterDemande()" class="space-y-5">

      <!-- Types de D√©chets -->
      <div>
        <label class="block font-semibold text-gray-700">Types de D√©chets :</label>
        <select multiple formControlName="typeDechets" required
          class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-400">
          <option value="Plastique">Plastique</option>
          <option value="Verre">Verre</option>
          <option value="Papier">Papier</option>
          <option value="M√©tal">M√©tal</option>
        </select>
        <p *ngIf="demandeForm.get('typeDechets')?.invalid && demandeForm.get('typeDechets')?.touched"
          class="text-red-500 text-sm mt-1">Veuillez s√©lectionner au moins un type de d√©chet.</p>
      </div>

      <!-- Poids -->
      <div>
        <label class="block font-semibold text-gray-700">Poids (kg) :</label>
        <input type="number" formControlName="poids" min="1" max="10" required
          class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-400" />
        <p *ngIf="demandeForm.get('poids')?.invalid && demandeForm.get('poids')?.touched"
          class="text-red-500 text-sm mt-1">
          <span *ngIf="demandeForm.get('poids')?.hasError('required')">Le poids est requis.</span>
          <span *ngIf="demandeForm.get('poids')?.hasError('min')">Minimum 1 kg.</span>
          <span *ngIf="demandeForm.get('poids')?.hasError('max')">Maximum 10 kg.</span>
        </p>
      </div>

      <!-- Adresse -->
      <div>
        <label class="block font-semibold text-gray-700">Adresse :</label>
        <input type="text" formControlName="adresse" required
          class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-400" />
        <p *ngIf="demandeForm.get('adresse')?.invalid && demandeForm.get('adresse')?.touched"
          class="text-red-500 text-sm mt-1">L'adresse est requise.</p>
      </div>

      <!-- Ville -->
      <div>
        <label class="block font-semibold text-gray-700">Ville :</label>
        <input type="text" formControlName="ville" required
          class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-400" />
        <p *ngIf="demandeForm.get('ville')?.invalid && demandeForm.get('ville')?.touched"
          class="text-red-500 text-sm mt-1">La ville est requise.</p>
      </div>

      <!-- Date souhait√©e -->
      <div>
        <label class="block font-semibold text-gray-700">Date souhait√©e :</label>
        <input type="date" formControlName="dateSouhaitee" required
          class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-400" />
        <p *ngIf="demandeForm.get('dateSouhaitee')?.invalid && demandeForm.get('dateSouhaitee')?.touched"
          class="text-red-500 text-sm mt-1">La date souhait√©e est requise.</p>
      </div>

      <!-- Heure souhait√©e -->
      <div>
        <label class="block font-semibold text-gray-700">Heure souhait√©e :</label>
        <input type="time" formControlName="heureSouhaitee" required
          class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-400" />
        <p *ngIf="demandeForm.get('heureSouhaitee')?.invalid && demandeForm.get('heureSouhaitee')?.touched"
          class="text-red-500 text-sm mt-1">L'heure est requise (entre 09h00 et 18h00).</p>
      </div>

      <!-- Photo des d√©chets -->
      <div>
        <label class="block font-semibold text-gray-700">Photo des d√©chets (optionnel) :</label>
        <input type="file" (change)="onFileSelected($event)"
          class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-400" />
      </div>

      <!-- Notes -->
      <div>
        <label class="block font-semibold text-gray-700">Notes (optionnel) :</label>
        <textarea formControlName="notes"
          class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-400"></textarea>
      </div>

      <!-- Bouton d'envoi -->
      <button type="submit" [disabled]="demandeForm.invalid"
        class="w-full p-3 bg-green-500 text-white font-bold text-lg rounded-lg hover:bg-green-700 transition-all duration-300 disabled:bg-gray-300 disabled:cursor-not-allowed">
        ‚úÖ Envoyer la Demande
      </button>

    </form>

  </div>
</div>
